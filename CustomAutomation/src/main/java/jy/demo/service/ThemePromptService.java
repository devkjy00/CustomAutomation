package jy.demo.service;

import jy.demo.dto.ThemePrompt;
import org.springframework.stereotype.Service;

import java.time.LocalTime;
import java.util.ArrayList;
import java.util.List;
import java.util.Random;

@Service
public class ThemePromptService {

    private final List<ThemePrompt> themes;
    private final Random random;

    public ThemePromptService() {
        this.random = new Random();
        this.themes = new ArrayList<>();
        initializeThemes();
    }

    private void initializeThemes() {
        themes.add(new ThemePrompt(
            "ðŸ’¡ ì˜¤ëŠ˜ì˜ ëª…ì–¸",
            "ë‹¹ì‹ ì€ ì „ë¬¸ ë¼ì´í”„ ì½”ì¹˜ìž…ë‹ˆë‹¤. ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ ì‹œìž‘í•˜ëŠ” ì‚¬ëžŒë“¤ì—ê²Œ ë™ê¸°ë¶€ì—¬ê°€ ë  ìˆ˜ ìžˆëŠ” ëª…ì–¸ì„ í•˜ë‚˜ ì„ ì •í•˜ê³ , " +
            "ê·¸ ëª…ì–¸ì´ í˜„ëŒ€ ì§ìž¥ì¸ì˜ ì‚¶ì— ì–´ë–¤ ì˜ë¯¸ì™€ ì ìš©ì ì´ ìžˆëŠ”ì§€ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”. " +
            "ëª…ì–¸ì€ ë°˜ë“œì‹œ ì¶œì²˜(ìž‘ê°€/ì¸ë¬¼)ë¥¼ í¬í•¨í•˜ê³ , í•´ì„ì€ ì‹¤ìƒí™œ ì˜ˆì‹œë¥¼ ë“¤ì–´ 200ìž ì´ë‚´ë¡œ ìž‘ì„±í•´ì£¼ì„¸ìš”. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸƒ ê±´ê°• ë¼ì´í”„",
            "ë‹¹ì‹ ì€ ì˜ˆë°©ì˜í•™ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. ë°”ìœ ì¼ìƒ ì†ì—ì„œë„ ì¦‰ì‹œ ì‹¤ì²œ ê°€ëŠ¥í•œ ê±´ê°• ê´€ë¦¬ íŒì„ ì œì‹œí•´ì£¼ì„¸ìš”. " +
            "ë‹¨ìˆœí•œ ì¡°ì–¸ì´ ì•„ë‹Œ, ê³¼í•™ì  ê·¼ê±°(ì—°êµ¬ ê²°ê³¼ë‚˜ ì˜í•™ì  ì›ë¦¬)ì™€ í•¨ê»˜ êµ¬ì²´ì ì¸ ì‹¤ì²œ ë°©ë²•ì„ ì„¤ëª…í•˜ê³ , " +
            "ì´ë¥¼ í†µí•´ ì–»ì„ ìˆ˜ ìžˆëŠ” ê±´ê°•ìƒì˜ ì´ì ì„ ëª…í™•ížˆ ì œì‹œí•´ì£¼ì„¸ìš”. 150ìž ì´ë‚´ë¡œ ìž‘ì„±í•˜ë˜ ì „ë¬¸ì„±ê³¼ ì‹¤ìš©ì„±ì„ ëª¨ë‘ ë‹´ì•„ì£¼ì„¸ìš”. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "âš¡ ìƒì‚°ì„± í˜ì‹ ",
            "ë‹¹ì‹ ì€ ìƒì‚°ì„± ì»¨ì„¤í„´íŠ¸ìž…ë‹ˆë‹¤. í˜„ëŒ€ ì§€ì‹ ê·¼ë¡œìžë“¤ì´ ì—…ë¬´ íš¨ìœ¨ì„±ì„ ê·¹ëŒ€í™”í•  ìˆ˜ ìžˆëŠ” ê²€ì¦ëœ ìƒì‚°ì„± ê¸°ë²•ì„ ì†Œê°œí•´ì£¼ì„¸ìš”. " +
            "ë‹¨ìˆœ íŒì´ ì•„ë‹Œ GTD, Pomodoro, Deep Work ê°™ì€ êµ¬ì²´ì  ë°©ë²•ë¡ ì´ë‚˜ ë„êµ¬ë¥¼ ì–¸ê¸‰í•˜ê³ , " +
            "ì´ë¥¼ ì‹¤ì œ ì—…ë¬´ ìƒí™©ì— ì–´ë–»ê²Œ ì ìš©í•  ìˆ˜ ìžˆëŠ”ì§€ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•˜ë©°, ì˜ˆìƒë˜ëŠ” ì„±ê³¼ í–¥ìƒ íš¨ê³¼ê¹Œì§€ í¬í•¨í•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸš€ Tech Insight",
            "ë‹¹ì‹ ì€ ê¸°ìˆ  íŠ¸ë Œë“œ ì• ë„ë¦¬ìŠ¤íŠ¸ìž…ë‹ˆë‹¤. ìµœê·¼ IT/ê°œë°œ ë¶„ì•¼ì˜ í˜ì‹  ê¸°ìˆ ì´ë‚˜ íŠ¸ë Œë“œë¥¼ ì„ ì •í•˜ì—¬, " +
            "í•´ë‹¹ ê¸°ìˆ ì˜ í•µì‹¬ ê°œë…, ê¸°ì¡´ ê¸°ìˆ ê³¼ì˜ ì°¨ë³„ì , ì‚°ì—…ì— ë¯¸ì¹  ì˜í–¥, ê·¸ë¦¬ê³  ê°œë°œìžê°€ ì£¼ëª©í•´ì•¼ í•˜ëŠ” ì´ìœ ë¥¼ " +
            "êµ¬ì²´ì  ì‚¬ë¡€(ê¸°ì—…ëª…, ì œí’ˆëª…)ì™€ í•¨ê»˜ ì „ë¬¸ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”. AI, í´ë¼ìš°ë“œ, DevOps, Web3 ë“± ìµœì‹  ë¶„ì•¼ ì¤‘ì‹¬ìœ¼ë¡œ 250ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”.",
            true  // ì›¹ ê²€ìƒ‰ í•„ìš”
        ));

        themes.add(new ThemePrompt(
            "ðŸ“š í•™ìŠµ ì „ëžµ",
            "ë‹¹ì‹ ì€ í•™ìŠµ ì‹¬ë¦¬í•™ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. ì„±ì¸ í•™ìŠµìžê°€ ìƒˆë¡œìš´ ê¸°ìˆ ì´ë‚˜ ì§€ì‹ì„ íš¨ê³¼ì ìœ¼ë¡œ ìŠµë“í•  ìˆ˜ ìžˆëŠ” " +
            "ê³¼í•™ì ìœ¼ë¡œ ê²€ì¦ëœ í•™ìŠµ ì „ëžµì„ ì œì‹œí•´ì£¼ì„¸ìš”. ë‹¨ìˆœ ì•”ê¸°ê°€ ì•„ë‹Œ ìž¥ê¸° ê¸°ì–µê³¼ ì‹¤ë¬´ ì ìš©ì„ ìœ„í•œ ë°©ë²•ë¡ ì„ ì„¤ëª…í•˜ê³ , " +
            "Spaced Repetition, Active Recall, Feynman Technique ê°™ì€ êµ¬ì²´ì  ê¸°ë²•ì„ ì–¸ê¸‰í•˜ë©° " +
            "ì‹¤ì²œ ê°€ëŠ¥í•œ ë£¨í‹´ì„ ì œì•ˆí•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸ§  ë§ˆì¸ë“œì…‹ ì½”ì¹­",
            "ë‹¹ì‹ ì€ ì„±ìž¥ ë§ˆì¸ë“œì…‹ ì „ë¬¸ ì½”ì¹˜ìž…ë‹ˆë‹¤. Carol Dweckì˜ ì„±ìž¥ ë§ˆì¸ë“œì…‹ ì´ë¡ ì— ê¸°ë°˜í•˜ì—¬, " +
            "ì‹¤íŒ¨ì™€ ì–´ë ¤ì›€ì„ ì„±ìž¥ì˜ ê¸°íšŒë¡œ ì „í™˜í•˜ëŠ” êµ¬ì²´ì ì¸ ì‚¬ê³  íŒ¨í„´ê³¼ ìžê¸° ëŒ€í™” ë°©ì‹ì„ ì œì‹œí•´ì£¼ì„¸ìš”. " +
            "ê³ ì • ë§ˆì¸ë“œì…‹ì˜ í•¨ì •ì„ í”¼í•˜ê³ , ë„ì „ì  ìƒí™©ì—ì„œ íšŒë³µíƒ„ë ¥ì„±ì„ ë°œíœ˜í•˜ëŠ” ì‹¤ì²œ ê°€ëŠ¥í•œ ë©˜íƒˆ ì „ëžµì„ " +
            "ì‹¤ì œ ì‚¬ë¡€ì™€ í•¨ê»˜ ì„¤ëª…í•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "â° ì‹œê°„ ë§ˆìŠ¤í„°",
            "ë‹¹ì‹ ì€ ì‹œê°„ ê´€ë¦¬ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. íŒŒí‚¨ìŠ¨ì˜ ë²•ì¹™, íŒŒë ˆí†  ì›ì¹™(80/20 ë²•ì¹™), ì•„ì´ì  í•˜ì›Œ ë§¤íŠ¸ë¦­ìŠ¤ ë“± " +
            "ê²€ì¦ëœ ì‹œê°„ ê´€ë¦¬ ì›ì¹™ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì—¬, ê·¸ ì›ë¦¬ì™€ ì‹¤ì œ ì ìš© ë°©ë²•ì„ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”. " +
            "í˜„ëŒ€ì¸ì˜ ê°€ìž¥ í° ì‹œê°„ ë‚­ë¹„ ìš”ì†Œ(SNS, íšŒì˜, ë©€í‹°íƒœìŠ¤í‚¹ ë“±)ë¥¼ ê·¹ë³µí•˜ê³  " +
            "í•µì‹¬ ì—…ë¬´ì— ì§‘ì¤‘í•˜ëŠ” ì‹¤í–‰ ê°€ëŠ¥í•œ ì‹œìŠ¤í…œì„ ì œì•ˆí•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸŽ¨ ì°½ì˜ì„± ê°œë°œ",
            "ë‹¹ì‹ ì€ ì°½ì˜ì„± ì—°êµ¬ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. ë‡Œê³¼í•™ê³¼ ì‹¬ë¦¬í•™ ì—°êµ¬ì— ê¸°ë°˜í•œ ì°½ì˜ì  ì‚¬ê³  ì´‰ì§„ ë°©ë²•ì„ ì œì‹œí•´ì£¼ì„¸ìš”. " +
            "Divergent Thinking, Lateral Thinking, SCAMPER ê¸°ë²• ë“± êµ¬ì²´ì ì¸ ì°½ì˜ì„± ë„êµ¬ë¥¼ ì†Œê°œí•˜ê³ , " +
            "ì¼ìƒì—ì„œ í˜ì‹ ì  ì•„ì´ë””ì–´ë¥¼ ë„ì¶œí•˜ëŠ” í™˜ê²½ ì¡°ì„± ë°©ë²•(ë¬¼ë¦¬ì  ê³µê°„, ì‹œê°„ëŒ€, í™œë™)ê³¼ " +
            "ìŠµê´€ì„ ê³¼í•™ì  ê·¼ê±°ì™€ í•¨ê»˜ ì„¤ëª…í•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸŽ¯ ëª©í‘œ ì„¤ì •",
            "ë‹¹ì‹ ì€ ì„±ê³¼ ê´€ë¦¬ ì»¨ì„¤í„´íŠ¸ìž…ë‹ˆë‹¤. SMART ëª©í‘œ ì„¤ì • í”„ë ˆìž„ì›Œí¬(Specific, Measurable, Achievable, Relevant, Time-bound)ë¥¼ " +
            "í™œìš©í•˜ì—¬, ì¶”ìƒì ì¸ ëª©í‘œë¥¼ êµ¬ì²´ì ì´ê³  ì‹¤í–‰ ê°€ëŠ¥í•œ ì•¡ì…˜ í”Œëžœìœ¼ë¡œ ì „í™˜í•˜ëŠ” ë°©ë²•ì„ ë‹¨ê³„ë³„ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”. " +
            "ëª©í‘œ ë‹¬ì„±ë¥ ì„ ë†’ì´ëŠ” ì¤‘ê°„ ì ê²€ ì²´ê³„ì™€ ë™ê¸° ë¶€ì—¬ ìœ ì§€ ì „ëžµì„ í¬í•¨í•˜ë©°, " +
            "ì‹¤ì œ ì‚¬ë¡€ë¥¼ ë“¤ì–´ ì„¤ëª…í•´ì£¼ì„¸ìš”. 200ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));

        themes.add(new ThemePrompt(
            "ðŸ’¼ ì»¤ë¦¬ì–´ ì¸ì‚¬ì´íŠ¸",
            "ë‹¹ì‹ ì€ ì»¤ë¦¬ì–´ ì½”ì¹­ ì „ë¬¸ê°€ìž…ë‹ˆë‹¤. í˜„ëŒ€ ì§ìž¥ì¸ì´ ì»¤ë¦¬ì–´ ì„±ìž¥ì„ ìœ„í•´ ë°˜ë“œì‹œ ê°œë°œí•´ì•¼ í•  " +
            "í•µì‹¬ ì—­ëŸ‰(í•˜ë“œ ìŠ¤í‚¬ ë˜ëŠ” ì†Œí”„íŠ¸ ìŠ¤í‚¬)ì„ í•œ ê°€ì§€ ì„ ì •í•˜ì—¬, ê·¸ ì—­ëŸ‰ì˜ ì¤‘ìš”ì„±, ê°œë°œ ë°©ë²•, " +
            "ì‹¤ë¬´ ì ìš© ì‚¬ë¡€ë¥¼ êµ¬ì²´ì ìœ¼ë¡œ ì„¤ëª…í•´ì£¼ì„¸ìš”. T-shaped ì¸ìž¬, í‰ìƒ í•™ìŠµ, ë„¤íŠ¸ì›Œí‚¹ ë“±ì˜ ê°œë…ì„ í™œìš©í•˜ê³ , " +
            "ì‹¤ì²œ ê°€ëŠ¥í•œ 6ê°œì›” ê°œë°œ ë¡œë“œë§µì„ ì œì‹œí•´ì£¼ì„¸ìš”. 250ìž ì´ë‚´. " +
            "ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•ì„ ì‚¬ìš©í•˜ì§€ ë§ê³  ì¼ë°˜ í…ìŠ¤íŠ¸ë¡œë§Œ ìž‘ì„±í•˜ì„¸ìš”."
        ));
    }

    /**
     * ëžœë¤í•˜ê²Œ í…Œë§ˆ í”„ë¡¬í”„íŠ¸ë¥¼ ì„ íƒ
     */
    public ThemePrompt getRandomTheme() {
        int index = random.nextInt(themes.size());
        return themes.get(index);
    }

    /**
     * ì‹œê°„ëŒ€ì— ë”°ë¼ ì ì ˆí•œ í…Œë§ˆ ì„ íƒ
     *
     * ì‹œê°„ëŒ€ë³„ ìµœì  í…Œë§ˆ:
     * - ì•„ì¹¨ (6-11ì‹œ): ì˜¤ëŠ˜ì˜ ëª…ì–¸, ê±´ê°• ë¼ì´í”„, ëª©í‘œ ì„¤ì • - í•˜ë£¨ë¥¼ ì‹œìž‘í•˜ëŠ” ì—ë„ˆì§€ì™€ ë°©í–¥ì„±
     * - ë‚® (12-17ì‹œ): ìƒì‚°ì„± í˜ì‹ , ì‹œê°„ ë§ˆìŠ¤í„°, Tech Insight - ì—…ë¬´ íš¨ìœ¨ì„±ê³¼ ì „ë¬¸ì„±
     * - ì €ë… (18-22ì‹œ): í•™ìŠµ ì „ëžµ, ì»¤ë¦¬ì–´ ì¸ì‚¬ì´íŠ¸, ë§ˆì¸ë“œì…‹ ì½”ì¹­ - ì„±ìž¥ê³¼ ë°œì „
     * - ë°¤ (22-24ì‹œ): ì°½ì˜ì„± ê°œë°œ, ë§ˆì¸ë“œì…‹ ì½”ì¹­ - ë‚´ì¼ì„ ìœ„í•œ ì¤€ë¹„
     * - ìƒˆë²½ (0-5ì‹œ): ë§ˆì¸ë“œì…‹ ì½”ì¹­, ì°½ì˜ì„± ê°œë°œ - ì¡°ìš©í•œ ì‹œê°„ì˜ ê¹Šì€ ì‚¬ê³ 
     */
    public ThemePrompt getThemeByTime() {
        LocalTime now = LocalTime.now();
        int hour = now.getHour();

        // ì•„ì¹¨ (6-11ì‹œ): ëª…ì–¸(0), ê±´ê°•(1), ëª©í‘œì„¤ì •(8)
        if (hour >= 6 && hour < 12) {
            int[] morningThemes = {0, 1, 8};
            return themes.get(morningThemes[random.nextInt(morningThemes.length)]);
        }
        // ë‚® (12-17ì‹œ): ìƒì‚°ì„±(2), ì‹œê°„ê´€ë¦¬(6), Tech Insight(3)
        else if (hour >= 12 && hour < 18) {
            int[] afternoonThemes = {2, 6, 3};
            return themes.get(afternoonThemes[random.nextInt(afternoonThemes.length)]);
        }
        // ì €ë… (18-21ì‹œ): í•™ìŠµì „ëžµ(4), ì»¤ë¦¬ì–´(9), ë§ˆì¸ë“œì…‹(5)
        else if (hour >= 18 && hour < 22) {
            int[] eveningThemes = {4, 9, 5};
            return themes.get(eveningThemes[random.nextInt(eveningThemes.length)]);
        }
        // ë°¤ (22-23ì‹œ): ì°½ì˜ì„±(7), ë§ˆì¸ë“œì…‹(5)
        else if (hour >= 22 && hour < 24) {
            int[] nightThemes = {7, 5};
            return themes.get(nightThemes[random.nextInt(nightThemes.length)]);
        }
        // ìƒˆë²½ (0-5ì‹œ): ë§ˆì¸ë“œì…‹(5), ì°½ì˜ì„±(7)
        else {
            int[] lateNightThemes = {5, 7};
            return themes.get(lateNightThemes[random.nextInt(lateNightThemes.length)]);
        }
    }

    /**
     * ëª¨ë“  í…Œë§ˆ ëª©ë¡ ì¡°íšŒ
     */
    public List<ThemePrompt> getAllThemes() {
        return new ArrayList<>(themes);
    }

    /**
     * ì»¤ìŠ¤í…€ í…Œë§ˆ ì¶”ê°€
     */
    public void addTheme(String theme, String prompt) {
        themes.add(new ThemePrompt(theme, prompt));
    }
}
